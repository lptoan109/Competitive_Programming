<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i 2: ƒê·ªïi v·ªã tr√≠ ch·ªØ s·ªë - H∆∞·ªõng d·∫´n & M√¥ ph·ªèng</title>
    <script>
        window.MathJax = { tex: { inlineMath: [['$', '$']] } };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        :root {
            --color-primary: #0284c7; 
            --color-secondary: #38bdf8; 
            --color-accent: #f59e0b; 
            --color-success: #10b981; 
            --color-dark: #0c4a6e; 
            --bg-color: #f0f9ff; 
            --card-bg: #ffffff;
            --text-color: #334155;
            --code-bg: #1e1e1e;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0; padding: 20px; line-height: 1.6;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        .header {
            background-color: var(--color-dark); color: #e0f2fe; padding: 15px; text-align: center;
            border-radius: 12px 12px 0 0; border-bottom: 5px solid var(--color-accent);
        }
        .main-title {
            margin: 0; text-transform: uppercase; font-weight: 900; font-size: 1.8rem; letter-spacing: 1px; color: #fbbf24;
        }

        .tabs { display: flex; background-color: #e2e8f0; margin-bottom: 0; }
        .tab-btn {
            flex: 1; padding: 18px; border: none; background: #cbd5e1;
            cursor: pointer; font-size: 16px; font-weight: 700; color: #64748b;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background-color: var(--card-bg); color: var(--color-primary); 
            border-top: 4px solid var(--color-primary);
        }

        .tab-content {
            display: none; background: var(--card-bg); padding: 30px;
            min-height: 600px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .tab-content.active { display: block; }

        .section-header {
            font-size: 1.4rem; font-weight: bold; margin: 30px 0 20px 0;
            padding-bottom: 10px; border-bottom: 2px solid #e2e8f0; color: var(--color-dark);
        }

        .step-card {
            background: #fff; border-radius: 8px; padding: 25px; margin-bottom: 25px;
            position: relative; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid #e2e8f0;
        }
        .border-blue { border-left: 6px solid #0284c7; }
        .border-orange { border-left: 6px solid var(--color-accent); }
        .border-green { border-left: 6px solid var(--color-success); }

        .step-badge {
            position: absolute; top: -14px; left: 20px; color: white;
            padding: 4px 16px; border-radius: 20px; font-weight: bold; font-size: 0.9rem;
            text-transform: uppercase; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .bg-blue { background-color: #0284c7; }
        .bg-orange { background-color: var(--color-accent); color: #000; }
        .bg-green { background-color: var(--color-success); }

        /* CSS Codeblock chu·∫©n */
        .code-block {
            background-color: var(--code-bg); color: #e9ebee;
            font-family: Consolas, "Courier New", monospace; font-size: 15px;
            line-height: 1.6; padding: 16px; border-radius: 8px;
            overflow-x: auto; white-space: pre; border-left: 5px solid var(--color-primary);
        }
        .code-block .kw { color: #38bdf8; font-weight: bold; }
        .code-block .var { color: #e4e121; font-weight: bold; }
        .code-block .val { color: #ff4d4d; font-weight: bold; }
        .code-block .cmt { color: #9e9e9e; font-style: italic; }

        .control-panel {
            background-color: #f0f9ff; padding: 25px; border-radius: 12px;
            display: flex; gap: 15px; margin-bottom: 25px; border: 2px solid #bae6fd; align-items: center;
        }
        input { padding: 10px; border: 2px solid #7dd3fc; border-radius: 8px; font-size: 1rem; width: 300px; }

        button.action-btn {
            padding: 12px 24px; color: white; border: none; border-radius: 8px; 
            cursor: pointer; font-weight: bold; transition: all 0.2s;
        }
        .btn-init { background-color: var(--color-primary); }
        .btn-step { background-color: var(--color-accent); color: #000; }

        .sim-layout { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; }
        .log-area {
            background-color: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px;
            height: 500px; overflow-y: auto; font-family: 'Consolas', monospace;
        }

        .teacher-footer {
            background-color: var(--color-dark); color: #cffafe; padding: 25px 10px;
            margin-top: 0; border-top: 5px solid var(--color-accent); text-align: center;
            border-radius: 0 0 16px 16px;
        }
        .footer-title { font-size: 1.2rem; font-weight: 900; text-transform: uppercase; margin-bottom: 15px; letter-spacing: 1px; color: var(--color-accent); }
        .footer-info { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; font-size: 1.05rem; }
        .footer-item { display: flex; align-items: center; gap: 10px; color: #cffafe; text-decoration: none; transition: all 0.3s ease; padding: 5px 10px; border-radius: 8px;}
        .footer-item:hover { background-color: rgba(255, 255, 255, 0.1); color: #fff; transform: translateY(-2px); }
        
        .digit-container { display: flex; gap: 5px; margin: 20px 0; justify-content: center; }
        .digit-box { 
            width: 40px; height: 50px; display: flex; align-items: center; justify-content: center;
            background: #fff; border: 2px solid #0284c7; border-radius: 4px; font-size: 1.5rem; font-weight: bold;
        }
        .digit-highlight { background: var(--color-accent); border-color: #000; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1 class="main-title">B√†i 2: ƒê·ªïi V·ªã Tr√≠ Ch·ªØ S·ªë (SWAP)</h1>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('theory')">üìö H∆∞·ªõng D·∫´n & L√Ω Thuy·∫øt</button>
        <button class="tab-btn" onclick="openTab('simulation')">‚öôÔ∏è M√¥ Ph·ªèng Tham Lam</button>
    </div>

    <div id="theory" class="tab-content active">
        <h2 class="section-header">1. Ph√¢n t√≠ch b√†i to√°n</h2>
        <div class="step-card border-blue">
            <span class="step-badge bg-blue">√ù t∆∞·ªüng ch√≠nh</span>
            <p>ƒê·ªÉ nh·∫≠n ƒë∆∞·ª£c s·ªë nh·ªè nh·∫•t, ta c·∫ßn ƒë∆∞a c√°c ch·ªØ s·ªë <b>nh·ªè nh·∫•t</b> ·ªü ph√≠a sau l√™n c√°c v·ªã tr√≠ <b>tr·ªçng s·ªë cao</b> (ph√≠a tr∆∞·ªõc).</p>
            <p>Quy t·∫Øc: Ch√∫ng ta ch·ªâ ƒë∆∞·ª£c ph√©p ƒë·ªïi ch·ªó t·ªëi ƒëa 2 ch·ªØ s·ªë (1 l·∫ßn ho√°n ƒë·ªïi duy nh·∫•t).</p>
        </div>

        <h2 class="section-header">2. Chi·∫øn thu·∫≠t Tham lam (Greedy)</h2>
        <div class="step-card border-orange">
            <span class="step-badge bg-orange">C√°c b∆∞·ªõc gi·∫£i</span>
            <ul>
                <li>Duy·ªát t·ª´ tr√°i sang ph·∫£i ƒë·ªÉ t√¨m v·ªã tr√≠ $i$ ƒë·∫ßu ti√™n c·∫ßn thay ƒë·ªïi.</li>
                <li>M·ªôt v·ªã tr√≠ $i$ c·∫ßn thay ƒë·ªïi khi t·ªìn t·∫°i m·ªôt ch·ªØ s·ªë <b>nh·ªè h∆°n</b> n√≥ ·ªü ph√≠a sau.</li>
                <li>Trong c√°c ch·ªØ s·ªë nh·ªè h∆°n ƒë√≥, ta ch·ªçn ch·ªØ s·ªë <b>nh·ªè nh·∫•t</b>. N·∫øu c√≥ nhi·ªÅu ch·ªØ s·ªë c√πng nh·ªè nh·∫•t, ta ch·ªçn ch·ªØ s·ªë ·ªü v·ªã tr√≠ <b>cu·ªëi c√πng</b> (ƒë·ªÉ gi·ªØ l·∫°i c√°c ch·ªØ s·ªë nh·ªè ·ªü v·ªã tr√≠ cao cho c√°c l∆∞·ª£t sau n·∫øu c√≥ th·ªÉ).</li>
                <li><b>L∆∞u √Ω ƒë·∫∑c bi·ªát:</b> ·ªû v·ªã tr√≠ ƒë·∫ßu ti√™n ($i=0$), ta kh√¥ng ƒë∆∞·ª£c ƒë·ªïi v·ªõi ch·ªØ s·ªë '0' v√¨ s·ªë kh√¥ng th·ªÉ b·∫Øt ƒë·∫ßu b·∫±ng '0'.</li>
            </ul>
        </div>

        <h2 class="section-header">3. M√£ gi·∫£ C++</h2>
        <div class="step-card border-green">
            <span class="step-badge bg-green">Tri·ªÉn khai</span>
            <div class="code-block">
<span class="cmt">// T√¨m ch·ªØ s·ªë nh·ªè nh·∫•t ·ªü ph√≠a sau v·ªã tr√≠ i</span>
<span class="kw">Duy·ªát</span> <span class="var">j</span> t·ª´ <span class="var">n</span> - <span class="val">1</span> ng∆∞·ª£c v·ªÅ <span class="var">i</span> + <span class="val">1</span>:
    <span class="kw">N·∫øu</span> (<span class="var">x√¢u_S</span>[<span class="var">j</span>] < <span class="var">x√¢u_S</span>[<span class="var">v·ªã_tr√≠_min</span>]):
        <span class="cmt">// R√†ng bu·ªôc: Kh√¥ng ƒë·ªïi ch·ªØ s·ªë '0' l√™n v·ªã tr√≠ ƒë·∫ßu ti√™n</span>
        <span class="kw">N·∫øu</span> (<span class="var">i</span> == <span class="val">0</span> v√† <span class="var">x√¢u_S</span>[<span class="var">j</span>] == <span class="val">'0'</span>) <span class="kw">ti·∫øp_t·ª•c</span>;
        
        <span class="var">v·ªã_tr√≠_min</span> = <span class="var">j</span>;

<span class="cmt">// N·∫øu t√¨m th·∫•y ch·ªØ s·ªë nh·ªè h∆°n, th·ª±c hi·ªán ƒë·ªïi ch·ªó duy nh·∫•t 1 l·∫ßn</span>
<span class="kw">N·∫øu</span> (<span class="var">v·ªã_tr√≠_min</span> != <span class="var">i</span>):
    <span class="kw">Ho√°n_ƒë·ªïi</span>(<span class="var">x√¢u_S</span>[<span class="var">i</span>], <span class="var">x√¢u_S</span>[<span class="var">v·ªã_tr√≠_min</span>]);
    <span class="kw">Tho√°t_v√≤ng_l·∫∑p</span>; <span class="cmt">// Ch·ªâ ƒë·ªïi t·ªëi ƒëa 2 ch·ªØ s·ªë (1 c·∫∑p)</span></div>
        </div>
    </div>

    <div id="simulation" class="tab-content">
        <div class="control-panel">
            <label><b>Nh·∫≠p s·ªë:</b></label> 
            <input type="text" id="inpS" value="21435" placeholder="Nh·∫≠p d√£y ch·ªØ s·ªë...">
            <button class="action-btn btn-init" onclick="initSim()">üöÄ Kh·ªüi t·∫°o</button>
            <button class="action-btn btn-step" id="btnStep" onclick="nextStep()" disabled>üëü T√¨m b∆∞·ªõc ƒë·ªïi</button>
        </div>
        <div class="sim-layout">
            <div class="step-card">
                <h3>Minh h·ªça s·ªë</h3>
                <div id="digitDisplay" class="digit-container"></div>
                <hr>
                <p>Tr·∫°ng th√°i: <b id="simStatus" class="val">Ch·ªù kh·ªüi t·∫°o</b></p>
                <p>K·∫øt qu·∫£: <b id="resVal" class="val" style="font-size: 1.5rem; color: var(--color-success);">-</b></p>
            </div>
            <div class="log-area" id="logArea"></div>
        </div>
    </div>

    <div class="teacher-footer">
        <div class="footer-title">Th·∫ßy Ho√†ng ƒêƒÉng Quang - Luy·ªán thi Chuy√™n Tin 10</div>
        <div class="footer-info">
            <span class="footer-item">üìû <b>0903781593</b></span>
            <a href="http://luyenthichuyentin10.edu.vn" target="_blank" class="footer-item">üåê <b>luyenthichuyentin10.edu.vn</b></a>
        </div>
    </div>
</div>

<script>
    function openTab(id) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    let originalS = "";
    let sArr = [];
    let logArea = document.getElementById('logArea');

    function log(msg, color="#d4d4d4") {
        logArea.innerHTML += `<div style="color:${color}">> ${msg}</div>`;
        logArea.scrollTop = logArea.scrollHeight;
    }

    function renderDigits(highlightIdx = []) {
        const container = document.getElementById('digitDisplay');
        container.innerHTML = "";
        sArr.forEach((d, idx) => {
            const box = document.createElement('div');
            box.className = 'digit-box' + (highlightIdx.includes(idx) ? ' digit-highlight' : '');
            box.innerText = d;
            container.appendChild(box);
        });
    }

    function initSim() {
        originalS = document.getElementById('inpS').value.trim();
        if (!/^\d+$/.test(originalS)) {
            alert("Vui l√≤ng ch·ªâ nh·∫≠p c√°c ch·ªØ s·ªë!");
            return;
        }
        sArr = originalS.split('');
        logArea.innerHTML = "";
        document.getElementById('resVal').innerText = "-";
        document.getElementById('simStatus').innerText = "ƒê√£ kh·ªüi t·∫°o";
        document.getElementById('btnStep').disabled = false;
        renderDigits();
        log(`B·∫Øt ƒë·∫ßu x·ª≠ l√Ω s·ªë: ${originalS}`, "#fbbf24");
    }

    function nextStep() {
        let n = sArr.length;
        let swapped = false;

        for (let i = 0; i < n - 1; i++) {
            let minPos = i;
            log(`ƒêang x√©t v·ªã tr√≠ i = ${i} (ch·ªØ s·ªë ${sArr[i]})`, "#38bdf8");
            
            // T√¨m ch·ªØ s·ªë nh·ªè nh·∫•t ·ªü ph√≠a sau
            for (let j = n - 1; j > i; j--) {
                if (sArr[j] < sArr[minPos]) {
                    // Lu·∫≠t s·ªë 0 ƒë·∫ßu ti√™n
                    if (i === 0 && sArr[j] === '0') {
                        log(`&nbsp;&nbsp;B·ªè qua '0' t·∫°i v·ªã tr√≠ ${j} v√¨ kh√¥ng th·ªÉ ƒë∆∞a l√™n ƒë·∫ßu.`, "#9e9e9e");
                        continue;
                    }
                    
                    if (minPos === i || sArr[j] < sArr[minPos]) {
                        minPos = j;
                    }
                }
            }

            if (minPos !== i) {
                log(`T√¨m th·∫•y ch·ªØ s·ªë '${sArr[minPos]}' t·∫°i v·ªã tr√≠ ${minPos} nh·ªè nh·∫•t ƒë·ªÉ ƒë·ªïi l√™n v·ªã tr√≠ ${i}.`, "#10b981");
                renderDigits([i, minPos]);
                
                // Th·ª±c hi·ªán ƒë·ªïi
                let temp = sArr[i];
                sArr[i] = sArr[minPos];
                sArr[minPos] = temp;
                
                swapped = true;
                break;
            } else {
                log(`&nbsp;&nbsp;V·ªã tr√≠ ${i} ƒë√£ t·ªëi ∆∞u, kh√¥ng c√≥ s·ªë nh·ªè h∆°n h·ª£p l·ªá ph√≠a sau.`, "#9e9e9e");
            }
        }

        if (!swapped) {
            log("Kh√¥ng t√¨m th·∫•y v·ªã tr√≠ n√†o c·∫ßn ƒë·ªïi ƒë·ªÉ s·ªë nh·ªè h∆°n.", "#fbbf24");
        } else {
            log(`ƒê√£ th·ª±c hi·ªán ho√°n ƒë·ªïi th√†nh c√¥ng!`, "#fbbf24");
        }

        document.getElementById('resVal').innerText = sArr.join('');
        document.getElementById('simStatus').innerText = "Ho√†n th√†nh";
        document.getElementById('btnStep').disabled = true;
    }
</script>
</body>
</html>